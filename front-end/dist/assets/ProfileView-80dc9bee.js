import{e as g,g as m,h as B,o as h,i as v,w as a,a as e,b as s,d,t as $,u,j as V,K as y,f as N,H as R,I as S,s as P}from"./index-bd6cc2fe.js";import{w as T,t as A,u as p}from"./mdi-9b0bf6d7.js";import{b as C,c as U}from"./SectionTitleLineWithButton-b598e757.js";import{_ as k}from"./darkMode-d9a8e29e.js";import{_ as f,a as w}from"./FormControl-c71bfaa8.js";import{_ as E}from"./BaseButton-4bae2fa9.js";import{_ as I}from"./BaseButtons-da94e1a5.js";import{_ as j}from"./BaseLevel-744005ac.js";import{_ as M}from"./PillTag-3522f61a.js";import{_ as z}from"./LayoutAuthenticated-2cfa592e.js";import{_ as q}from"./NotificationBar-eeedb93f.js";const D={class:"space-y-3 text-center lg:mx-12"},F={class:"text-2xl"},H={class:"text-2l"},K=s("a",{class:"font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline",href:"https://t.me/sunsync_alert_bot"},"Bot Telegram",-1),L=s("br",null,null,-1),O={__name:"UserCard",setup(x){const r=g(),c=m(""),t=m(""),l=()=>{(r.getToken.value!=null||r.getToken.value!="")&&V.get("https://sunsync-main-service.onrender.com:3000/"+y,{headers:{Authorization:`Bearer ${r.getToken.value}`}}).then(o=>{c.value=o.data.username,t.value=o.data.bot_token})};return B(()=>{l()}),(o,b)=>(h(),v(k,null,{default:a(()=>[e(j,{type:"justify-around lg:justify-center"},{default:a(()=>[s("div",D,[s("h1",F,[d(" Buongiorno, "),s("strong",null,$(c.value),1),d("! ")]),s("h2",H,[d(" Il tuo token per accedere al "),K,d(" Ã¨:"),L,e(M,{class:"mt-2",label:t.value,color:"info",icon:u(T),small:!1},null,8,["label","icon"])])])]),_:1})]),_:1}))}},G={class:"grid grid-cols-1 gap-6"},J=s("b",null,"ERRORE: ",-1),ro={__name:"ProfileView",setup(x){const r=g(),c=N(),t=m(!1),l=m(""),o=R({password:"",password_confirmation:""}),b=async()=>{o.password===o.password_confirmation?V.patch("https://sunsync-main-service.onrender.com:3000/"+y,{old_password:o.old_password,password:o.password},{headers:{Authorization:`Bearer ${r.getToken.value}`}}).then(()=>{c.push("/dashboard")}).catch(_=>{t.value=!0,l.value=_.response.data["400 Bad Request"]}):(t.value=!0,l.value="Le password non coincidono")};return(_,n)=>(h(),v(z,null,{default:a(()=>[e(U,null,{default:a(()=>[e(C,{icon:u(A),title:"Profilo",main:""},null,8,["icon"]),e(O,{class:"mb-6"}),s("div",G,[e(k,{"is-form":"",onSubmit:S(b,["prevent"])},{footer:a(()=>[e(I,null,{default:a(()=>[e(E,{type:"submit",color:"info",label:"Cambia Password"})]),_:1})]),default:a(()=>[t.value?(h(),v(q,{key:0,color:"danger",icon:_.mdiMonitorCellphone},{default:a(()=>[J,d(" "+$(l.value),1)]),_:1},8,["icon"])):P("",!0),e(f,{label:"Vecchia Password",help:"Inserisci la tua vecchia password"},{default:a(()=>[e(w,{modelValue:o.old_password,"onUpdate:modelValue":n[0]||(n[0]=i=>o.old_password=i),icon:u(p),type:"password",name:"old_password",autocomplete:"old-password"},null,8,["modelValue","icon"])]),_:1}),e(f,{label:"Nuova Password",help:"Inserisci la tua nuova password"},{default:a(()=>[e(w,{modelValue:o.password,"onUpdate:modelValue":n[1]||(n[1]=i=>o.password=i),icon:u(p),type:"password",name:"password",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),e(f,{label:"Ripeti Nuova Password",help:"Ripeti la tua nuova password"},{default:a(()=>[e(w,{modelValue:o.password_confirmation,"onUpdate:modelValue":n[2]||(n[2]=i=>o.password_confirmation=i),icon:u(p),type:"password",name:"password_confirmation",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"])])]),_:1})]),_:1}))}};export{ro as default};
