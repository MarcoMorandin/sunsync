import{g as V,e as P,H as g,f as k,o as p,i as m,w as o,a,n as R,I as $,u as r,d as c,s as y,b as N,j as B,K as C}from"./index-c317085a.js";import{v as E,u as i}from"./mdi-9b0bf6d7.js";import{L as x,_ as L}from"./LayoutGuest-00956af3.js";import{_ as S}from"./darkMode-8dbeebf5.js";import{_ as d,a as u}from"./FormControl-e78bb9bb.js";import{_ as f}from"./BaseButton-2fca0dd5.js";import{_ as A}from"./BaseButtons-b53453a8.js";import{_}from"./NotificationBar-d16931a1.js";import"./BaseLevel-24129793.js";const I=N("b",null,"ERRORE: ",-1),O={__name:"ChangeTempPassword",setup(T){const l=V(!1),w=P(),e=g({login:"",pass:"",oldPass:"",repeatPass:""}),h=k(),b=async()=>{e.pass===e.repeatPass?B.patch("http://localhost:3000"+C,{old_password:e.oldPass,password:e.pass},{headers:{Authorization:`Bearer ${w.getToken.value}`}}).then(()=>{h.push("/dashboard")}).catch(n=>{l.value=!0,error.value=n.response.data["400 Bad Request"]}):(l.value=!0,error.value="Le password non coincidono")};return(n,s)=>(p(),m(x,null,{default:o(()=>[a(L,{bg:"purplePink"},{default:o(({cardClass:v})=>[a(S,{class:R(v),"is-form":"",onSubmit:$(b,["prevent"])},{footer:o(()=>[a(A,null,{default:o(()=>[a(f,{type:"submit",color:"info",label:"Change password"}),a(f,{to:"/login",color:"info",outline:"",label:"Back"})]),_:1})]),default:o(()=>[a(_,{color:"info",icon:r(E)},{default:o(()=>[c(" Devi cambiare la password che ti Ã¨ stata assegnata ")]),_:1},8,["icon"]),l.value?(p(),m(_,{key:0,color:"danger",icon:n.mdiMonitorCellphone},{default:o(()=>[I,c(" Errore nell'effettuare il cambio della password ")]),_:1},8,["icon"])):y("",!0),a(d,{label:"Vecchia Password",help:"Inserisci la tua vecchia password"},{default:o(()=>[a(u,{modelValue:e.oldPass,"onUpdate:modelValue":s[0]||(s[0]=t=>e.oldPass=t),icon:r(i),type:"password",name:"old_password",autocomplete:"old-password"},null,8,["modelValue","icon"])]),_:1}),a(d,{label:"Nuova Password",help:"Inserisci la tua nuova password"},{default:o(()=>[a(u,{modelValue:e.pass,"onUpdate:modelValue":s[1]||(s[1]=t=>e.pass=t),icon:r(i),type:"password",name:"password",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),a(d,{label:"Ripeti Nuova Password",help:"Ripeti la tua nuova password"},{default:o(()=>[a(u,{modelValue:e.repeatPass,"onUpdate:modelValue":s[2]||(s[2]=t=>e.repeatPass=t),icon:r(i),type:"password",name:"password_confirmation",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{O as default};
