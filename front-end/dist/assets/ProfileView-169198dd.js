import{e as g,g as m,h as B,o as h,i as v,w as e,a,b as s,d,t as $,u,j as V,K as k,f as N,H as R,I as S,s as P}from"./index-c317085a.js";import{w as T,t as A,u as p}from"./mdi-9b0bf6d7.js";import{b as C,c as U}from"./SectionTitleLineWithButton-c1385c23.js";import{_ as x}from"./darkMode-8dbeebf5.js";import{_ as f,a as w}from"./FormControl-e78bb9bb.js";import{_ as E}from"./BaseButton-2fca0dd5.js";import{_ as I}from"./BaseButtons-b53453a8.js";import{_ as j}from"./BaseLevel-24129793.js";import{_ as M}from"./PillTag-a8c5fe6b.js";import{_ as z}from"./LayoutAuthenticated-269f4650.js";import{_ as q}from"./NotificationBar-d16931a1.js";const D={class:"space-y-3 text-center lg:mx-12"},F={class:"text-2xl"},H={class:"text-2l"},K=s("a",{class:"font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline",href:"https://t.me/sunsync_alert_bot"},"Bot Telegram",-1),L=s("br",null,null,-1),O={__name:"UserCard",setup(y){const l=g(),c=m(""),t=m(""),n=()=>{(l.getToken.value!=null||l.getToken.value!="")&&V.get("http://localhost:3000"+k,{headers:{Authorization:`Bearer ${l.getToken.value}`}}).then(o=>{c.value=o.data.username,t.value=o.data.bot_token})};return B(()=>{n()}),(o,b)=>(h(),v(x,null,{default:e(()=>[a(j,{type:"justify-around lg:justify-center"},{default:e(()=>[s("div",D,[s("h1",F,[d(" Buongiorno, "),s("strong",null,$(c.value),1),d("! ")]),s("h2",H,[d(" Il tuo token per accedere al "),K,d(" Ã¨:"),L,a(M,{class:"mt-2",label:t.value,color:"info",icon:u(T),small:!1},null,8,["label","icon"])])])]),_:1})]),_:1}))}},G={class:"grid grid-cols-1 gap-6"},J=s("b",null,"ERRORE: ",-1),lo={__name:"ProfileView",setup(y){const l=g(),c=N(),t=m(!1),n=m(""),o=R({password:"",password_confirmation:""}),b=async()=>{o.password===o.password_confirmation?V.patch("http://localhost:3000"+k,{old_password:o.old_password,password:o.password},{headers:{Authorization:`Bearer ${l.getToken.value}`}}).then(()=>{c.push("/dashboard")}).catch(_=>{t.value=!0,n.value=_.response.data["400 Bad Request"]}):(t.value=!0,n.value="Le password non coincidono")};return(_,r)=>(h(),v(z,null,{default:e(()=>[a(U,null,{default:e(()=>[a(C,{icon:u(A),title:"Profilo",main:""},null,8,["icon"]),a(O,{class:"mb-6"}),s("div",G,[a(x,{"is-form":"",onSubmit:S(b,["prevent"])},{footer:e(()=>[a(I,null,{default:e(()=>[a(E,{type:"submit",color:"info",label:"Cambia Password"})]),_:1})]),default:e(()=>[t.value?(h(),v(q,{key:0,color:"danger",icon:_.mdiMonitorCellphone},{default:e(()=>[J,d(" "+$(n.value),1)]),_:1},8,["icon"])):P("",!0),a(f,{label:"Vecchia Password",help:"Inserisci la tua vecchia password"},{default:e(()=>[a(w,{modelValue:o.old_password,"onUpdate:modelValue":r[0]||(r[0]=i=>o.old_password=i),icon:u(p),type:"password",name:"old_password",autocomplete:"old-password"},null,8,["modelValue","icon"])]),_:1}),a(f,{label:"Nuova Password",help:"Inserisci la tua nuova password"},{default:e(()=>[a(w,{modelValue:o.password,"onUpdate:modelValue":r[1]||(r[1]=i=>o.password=i),icon:u(p),type:"password",name:"password",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),a(f,{label:"Ripeti Nuova Password",help:"Ripeti la tua nuova password"},{default:e(()=>[a(w,{modelValue:o.password_confirmation,"onUpdate:modelValue":r[2]||(r[2]=i=>o.password_confirmation=i),icon:u(p),type:"password",name:"password_confirmation",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"])])]),_:1})]),_:1}))}};export{lo as default};
