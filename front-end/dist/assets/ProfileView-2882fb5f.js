import{e as b,g as f,h as B,o as w,i as h,w as e,a as o,b as i,d as v,t as g,f as N,A as R,u,m as A,l as C}from"./index-8b5b05ee.js";import{e as V,C as $,y as P,z as c}from"./endpoints-a97983b3.js";import{b as S,c as T}from"./SectionTitleLineWithButton-7f6b899e.js";import{_ as y}from"./darkMode-d4261cad.js";import{_ as p,a as _}from"./FormControl-9d942e3e.js";import{_ as U}from"./BaseButton-34cb38d9.js";import{_ as E}from"./BaseButtons-125c5a61.js";import{_ as z}from"./BaseLevel-3be95c65.js";import{a as M}from"./LayoutAuthenticated-69cdb4e0.js";import{_ as j}from"./NotificationBar-7bfe5da8.js";const I={class:"space-y-3 text-center md:text-left lg:mx-12"},q={class:"text-2xl"},D={__name:"UserCard",setup(x){const r=b(),d=f(""),n=()=>{(r.getToken.value!=null||r.getToken.value!="")&&V.get("https://sunsync-main-service.onrender.com"+$,{headers:{Authorization:`Bearer ${r.getToken.value}`}}).then(s=>{d.value=s.data.username})};return B(()=>{n()}),(s,a)=>(w(),h(y,null,{default:e(()=>[o(z,{type:"justify-around lg:justify-center"},{default:e(()=>[i("div",I,[i("h1",q,[v(" Buongiorno, "),i("strong",null,g(d.value),1),v("! ")])])]),_:1})]),_:1}))}},F={class:"grid grid-cols-1 gap-6"},L=i("b",null,"ERRORE: ",-1),oo={__name:"ProfileView",setup(x){const r=b(),d=N(),n=f(!1),s=f(""),a=R({password:"",password_confirmation:""}),k=async()=>{a.password===a.password_confirmation?V.patch("https://sunsync-main-service.onrender.com"+$,{old_password:a.old_password,password:a.password},{headers:{Authorization:`Bearer ${r.getToken.value}`}}).then(()=>{d.push("/dashboard")}).catch(m=>{n.value=!0,s.value=m.response.data["400 Bad Request"]}):(n.value=!0,s.value="Le password non coincidono")};return(m,t)=>(w(),h(M,null,{default:e(()=>[o(T,null,{default:e(()=>[o(S,{icon:u(P),title:"Profilo",main:""},null,8,["icon"]),o(D,{class:"mb-6"}),i("div",F,[o(y,{"is-form":"",onSubmit:A(k,["prevent"])},{footer:e(()=>[o(E,null,{default:e(()=>[o(U,{type:"submit",color:"info",label:"Cambia Password"})]),_:1})]),default:e(()=>[n.value?(w(),h(j,{key:0,color:"danger",icon:m.mdiMonitorCellphone},{default:e(()=>[L,v(" "+g(s.value),1)]),_:1},8,["icon"])):C("",!0),o(p,{label:"Vecchia Password",help:"Inserisci la tua vecchia password"},{default:e(()=>[o(_,{modelValue:a.old_password,"onUpdate:modelValue":t[0]||(t[0]=l=>a.old_password=l),icon:u(c),type:"password",name:"old_password",autocomplete:"old-password"},null,8,["modelValue","icon"])]),_:1}),o(p,{label:"Nuova Password",help:"Inserisci la tua nuova password"},{default:e(()=>[o(_,{modelValue:a.password,"onUpdate:modelValue":t[1]||(t[1]=l=>a.password=l),icon:u(c),type:"password",name:"password",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),o(p,{label:"Ripeti Nuova Password",help:"Ripeti la tua nuova password"},{default:e(()=>[o(_,{modelValue:a.password_confirmation,"onUpdate:modelValue":t[2]||(t[2]=l=>a.password_confirmation=l),icon:u(c),type:"password",name:"password_confirmation",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"])])]),_:1})]),_:1}))}};export{oo as default};
