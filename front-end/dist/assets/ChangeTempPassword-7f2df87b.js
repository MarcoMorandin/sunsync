import{g as V,e as P,H as g,f as k,o as p,i as m,w as s,a,n as y,I as R,u as r,d as c,s as $,b as N,j as B,K as C}from"./index-c5522a6f.js";import{v as E,u as i}from"./mdi-9b0bf6d7.js";import{L as x,_ as L}from"./LayoutGuest-8f991638.js";import{_ as S}from"./darkMode-cb7aa1d4.js";import{_ as d,a as u}from"./FormControl-bbcd3755.js";import{_ as f}from"./BaseButton-9889cf24.js";import{_ as z}from"./BaseButtons-5d5c878a.js";import{_}from"./NotificationBar-23b56f09.js";import"./BaseLevel-addfce22.js";const A=N("b",null,"ERRORE: ",-1),O={__name:"ChangeTempPassword",setup(I){const l=V(!1),w=P(),e=g({login:"",pass:"",oldPass:"",repeatPass:""}),h=k(),b=async()=>{e.pass===e.repeatPass?B.patch("http://sunsync-backend.azurewebsites.net"+C,{old_password:e.oldPass,password:e.pass},{headers:{Authorization:`Bearer ${w.getToken.value}`}}).then(()=>{h.push("/dashboard")}).catch(n=>{l.value=!0,error.value=n.response.data["400 Bad Request"]}):(l.value=!0,error.value="Le password non coincidono")};return(n,o)=>(p(),m(x,null,{default:s(()=>[a(L,{bg:"purplePink"},{default:s(({cardClass:v})=>[a(S,{class:y(v),"is-form":"",onSubmit:R(b,["prevent"])},{footer:s(()=>[a(z,null,{default:s(()=>[a(f,{type:"submit",color:"info",label:"Change password"}),a(f,{to:"/login",color:"info",outline:"",label:"Back"})]),_:1})]),default:s(()=>[a(_,{color:"info",icon:r(E)},{default:s(()=>[c(" Devi cambiare la password che ti Ã¨ stata assegnata ")]),_:1},8,["icon"]),l.value?(p(),m(_,{key:0,color:"danger",icon:n.mdiMonitorCellphone},{default:s(()=>[A,c(" Errore nell'effettuare il cambio della password ")]),_:1},8,["icon"])):$("",!0),a(d,{label:"Vecchia Password",help:"Inserisci la tua vecchia password"},{default:s(()=>[a(u,{modelValue:e.oldPass,"onUpdate:modelValue":o[0]||(o[0]=t=>e.oldPass=t),icon:r(i),type:"password",name:"old_password",autocomplete:"old-password"},null,8,["modelValue","icon"])]),_:1}),a(d,{label:"Nuova Password",help:"Inserisci la tua nuova password"},{default:s(()=>[a(u,{modelValue:e.pass,"onUpdate:modelValue":o[1]||(o[1]=t=>e.pass=t),icon:r(i),type:"password",name:"password",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),a(d,{label:"Ripeti Nuova Password",help:"Ripeti la tua nuova password"},{default:s(()=>[a(u,{modelValue:e.repeatPass,"onUpdate:modelValue":o[2]||(o[2]=t=>e.repeatPass=t),icon:r(i),type:"password",name:"password_confirmation",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{O as default};
