import{x as I,z as B,g as J,e as L,A as z,f as G,o as N,i as T,w as h,a as m,n as U,m as W,d as q,l as H,u as R,b as K}from"./index-8b5b05ee.js";import{y as Q,z as X,e as Y,A as Z}from"./endpoints-a97983b3.js";import{L as nn,_ as en}from"./LayoutGuest-3576262a.js";import{_ as tn}from"./darkMode-d4261cad.js";import{_ as $,a as C}from"./FormControl-9d942e3e.js";import{_ as D}from"./BaseButton-34cb38d9.js";import{_ as on}from"./BaseButtons-125c5a61.js";import{_ as rn}from"./NotificationBar-7bfe5da8.js";import"./BaseLevel-3be95c65.js";var A={exports:{}};(function(M,O){(function(o,r){M.exports=r()})(I,function(){return function(o){function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}var n={};return r.m=o,r.c=n,r.i=function(t){return t},r.d=function(t,e,u){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:u})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/vue-jwt-decode/dist",r(r.s=10)}([function(o,r,n){o.exports=!n(1)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(o,r){o.exports=function(n){try{return!!n()}catch{return!0}}},function(o,r){var n=o.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=n)},function(o,r){o.exports=function(n){return typeof n=="object"?n!==null:typeof n=="function"}},function(o,r){var n=o.exports={version:"2.5.3"};typeof __e=="number"&&(__e=n)},function(o,r){o.exports=function(n){if(n==null)throw TypeError("Can't call method on  "+n);return n}},function(o,r,n){var t=n(16);o.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return t(e)=="String"?e.split(""):Object(e)}},function(o,r){var n=Math.ceil,t=Math.floor;o.exports=function(e){return isNaN(e=+e)?0:(e>0?t:n)(e)}},function(o,r,n){var t=n(6),e=n(5);o.exports=function(u){return t(e(u))}},function(o,r,n){var t=n(11),e=n.n(t);r.a={install:function(u){u.prototype.$jwtDec=this,u.jwtDec=this},decode:function(u){if(typeof u!="string"&!u instanceof String)return null;var a=u.split(".");if(a.length<2)return null;var i=JSON.parse(atob(a[0])),s=JSON.parse(atob(a[1]));return e()({},i,s)}}},function(o,r,n){Object.defineProperty(r,"__esModule",{value:!0});var t=n(9);r.default=t.a},function(o,r,n){o.exports={default:n(12),__esModule:!0}},function(o,r,n){n(38),o.exports=n(4).Object.assign},function(o,r){o.exports=function(n){if(typeof n!="function")throw TypeError(n+" is not a function!");return n}},function(o,r,n){var t=n(3);o.exports=function(e){if(!t(e))throw TypeError(e+" is not an object!");return e}},function(o,r,n){var t=n(8),e=n(34),u=n(33);o.exports=function(a){return function(i,s,c){var d,f=t(i),p=e(f.length),l=u(c,p);if(a&&s!=s){for(;p>l;)if((d=f[l++])!=d)return!0}else for(;p>l;l++)if((a||l in f)&&f[l]===s)return a||l||0;return!a&&-1}}},function(o,r){var n={}.toString;o.exports=function(t){return n.call(t).slice(8,-1)}},function(o,r,n){var t=n(13);o.exports=function(e,u,a){if(t(e),u===void 0)return e;switch(a){case 1:return function(i){return e.call(u,i)};case 2:return function(i,s){return e.call(u,i,s)};case 3:return function(i,s,c){return e.call(u,i,s,c)}}return function(){return e.apply(u,arguments)}}},function(o,r,n){var t=n(3),e=n(2).document,u=t(e)&&t(e.createElement);o.exports=function(a){return u?e.createElement(a):{}}},function(o,r){o.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(o,r,n){var t=n(2),e=n(4),u=n(17),a=n(22),i=function(s,c,d){var f,p,l,w=s&i.F,b=s&i.G,x=s&i.S,v=s&i.P,j=s&i.B,E=s&i.W,_=b?e:e[c]||(e[c]={}),S=_.prototype,g=b?t:x?t[c]:(t[c]||{}).prototype;b&&(d=c);for(f in d)(p=!w&&g&&g[f]!==void 0)&&f in _||(l=p?g[f]:d[f],_[f]=b&&typeof g[f]!="function"?d[f]:j&&p?u(l,t):E&&g[f]==l?function(y){var k=function(P,V,F){if(this instanceof y){switch(arguments.length){case 0:return new y;case 1:return new y(P);case 2:return new y(P,V)}return new y(P,V,F)}return y.apply(this,arguments)};return k.prototype=y.prototype,k}(l):v&&typeof l=="function"?u(Function.call,l):l,v&&((_.virtual||(_.virtual={}))[f]=l,s&i.R&&S&&!S[f]&&a(S,f,l)))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,i.U=64,i.R=128,o.exports=i},function(o,r){var n={}.hasOwnProperty;o.exports=function(t,e){return n.call(t,e)}},function(o,r,n){var t=n(25),e=n(30);o.exports=n(0)?function(u,a,i){return t.f(u,a,e(1,i))}:function(u,a,i){return u[a]=i,u}},function(o,r,n){o.exports=!n(0)&&!n(1)(function(){return Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a!=7})},function(o,r,n){var t=n(28),e=n(26),u=n(29),a=n(35),i=n(6),s=Object.assign;o.exports=!s||n(1)(function(){var c={},d={},f=Symbol(),p="abcdefghijklmnopqrst";return c[f]=7,p.split("").forEach(function(l){d[l]=l}),s({},c)[f]!=7||Object.keys(s({},d)).join("")!=p})?function(c,d){for(var f=a(c),p=arguments.length,l=1,w=e.f,b=u.f;p>l;)for(var x,v=i(arguments[l++]),j=w?t(v).concat(w(v)):t(v),E=j.length,_=0;E>_;)b.call(v,x=j[_++])&&(f[x]=v[x]);return f}:s},function(o,r,n){var t=n(14),e=n(23),u=n(36),a=Object.defineProperty;r.f=n(0)?Object.defineProperty:function(i,s,c){if(t(i),s=u(s,!0),t(c),e)try{return a(i,s,c)}catch{}if("get"in c||"set"in c)throw TypeError("Accessors not supported!");return"value"in c&&(i[s]=c.value),i}},function(o,r){r.f=Object.getOwnPropertySymbols},function(o,r,n){var t=n(21),e=n(8),u=n(15)(!1),a=n(31)("IE_PROTO");o.exports=function(i,s){var c,d=e(i),f=0,p=[];for(c in d)c!=a&&t(d,c)&&p.push(c);for(;s.length>f;)t(d,c=s[f++])&&(~u(p,c)||p.push(c));return p}},function(o,r,n){var t=n(27),e=n(19);o.exports=Object.keys||function(u){return t(u,e)}},function(o,r){r.f={}.propertyIsEnumerable},function(o,r){o.exports=function(n,t){return{enumerable:!(1&n),configurable:!(2&n),writable:!(4&n),value:t}}},function(o,r,n){var t=n(32)("keys"),e=n(37);o.exports=function(u){return t[u]||(t[u]=e(u))}},function(o,r,n){var t=n(2),e=t["__core-js_shared__"]||(t["__core-js_shared__"]={});o.exports=function(u){return e[u]||(e[u]={})}},function(o,r,n){var t=n(7),e=Math.max,u=Math.min;o.exports=function(a,i){return a=t(a),a<0?e(a+i,0):u(a,i)}},function(o,r,n){var t=n(7),e=Math.min;o.exports=function(u){return u>0?e(t(u),9007199254740991):0}},function(o,r,n){var t=n(5);o.exports=function(e){return Object(t(e))}},function(o,r,n){var t=n(3);o.exports=function(e,u){if(!t(e))return e;var a,i;if(u&&typeof(a=e.toString)=="function"&&!t(i=a.call(e))||typeof(a=e.valueOf)=="function"&&!t(i=a.call(e))||!u&&typeof(a=e.toString)=="function"&&!t(i=a.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(o,r){var n=0,t=Math.random();o.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++n+t).toString(36))}},function(o,r,n){var t=n(20);t(t.S+t.F,"Object",{assign:n(24)})}])})})(A);var un=A.exports;const an=B(un),sn=K("b",null,"ERRORE: ",-1),yn={__name:"LoginView",setup(M){const O=J(!1),o=L(),r=z({login:"",pass:"",remember:!1}),n=G(),t=async()=>{Y.post("https://sunsync-main-service.onrender.com"+Z,{mail:r.login,password:r.pass}).then(e=>{o.setToken(e.data.token);let u=an.decode(e.data.token);o.setUserId(u.user_id),o.setExpire(u.exp),o.setRole(u.role),o.setDisabled(u.disabled),u.disabled?setTimeout(()=>n.push("/changepassword"),500):n.push("/dashboard")}).catch(()=>{O.value=!0})};return(e,u)=>(N(),T(nn,null,{default:h(()=>[m(en,{bg:"purplePink"},{default:h(({cardClass:a})=>[m(tn,{class:U(a),"is-form":"",onSubmit:W(t,["prevent"])},{footer:h(()=>[m(on,null,{default:h(()=>[m(D,{type:"submit",color:"info",label:"Login"}),m(D,{to:"/",color:"info",outline:"",label:"Indietro"})]),_:1})]),default:h(()=>[O.value?(N(),T(rn,{key:0,color:"danger",icon:e.mdiMonitorCellphone},{default:h(()=>[sn,q(" Errore nell'effettuare il login ")]),_:1},8,["icon"])):H("",!0),m($,{label:"Email",help:"Perfavore inserisci la tua email"},{default:h(()=>[m(C,{modelValue:r.login,"onUpdate:modelValue":u[0]||(u[0]=i=>r.login=i),icon:R(Q),name:"login",autocomplete:"username"},null,8,["modelValue","icon"])]),_:1}),m($,{label:"Password",help:"Perfavore inserisci la tua password"},{default:h(()=>[m(C,{modelValue:r.pass,"onUpdate:modelValue":u[1]||(u[1]=i=>r.pass=i),icon:R(X),type:"password",name:"password",autocomplete:"current-password"},null,8,["modelValue","icon"])]),_:1})]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{yn as default};
