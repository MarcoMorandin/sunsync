import{g as V,e as P,A as g,f as k,o as p,i as m,w as s,a,n as y,m as R,u as t,d as c,l as $,b as B}from"./index-8b5b05ee.js";import{B as C,z as i,e as N,C as E}from"./endpoints-a97983b3.js";import{L as x,_ as A}from"./LayoutGuest-3576262a.js";import{_ as L}from"./darkMode-d4261cad.js";import{_ as d,a as u}from"./FormControl-9d942e3e.js";import{_ as f}from"./BaseButton-34cb38d9.js";import{_ as S}from"./BaseButtons-125c5a61.js";import{_}from"./NotificationBar-7bfe5da8.js";import"./BaseLevel-3be95c65.js";const z=B("b",null,"ERRORE: ",-1),H={__name:"ChangeTempPassword",setup(T){const l=V(!1),w=P(),e=g({login:"",pass:"",oldPass:"",repeatPass:""}),h=k(),b=async()=>{e.pass===e.repeatPass?N.patch("https://sunsync-main-service.onrender.com"+E,{old_password:e.oldPass,password:e.pass},{headers:{Authorization:`Bearer ${w.getToken.value}`}}).then(()=>{h.push("/dashboard")}).catch(n=>{l.value=!0,error.value=n.response.data["400 Bad Request"]}):(l.value=!0,error.value="Le password non coincidono")};return(n,o)=>(p(),m(x,null,{default:s(()=>[a(A,{bg:"purplePink"},{default:s(({cardClass:v})=>[a(L,{class:y(v),"is-form":"",onSubmit:R(b,["prevent"])},{footer:s(()=>[a(S,null,{default:s(()=>[a(f,{type:"submit",color:"info",label:"Change password"}),a(f,{to:"/login",color:"info",outline:"",label:"Back"})]),_:1})]),default:s(()=>[a(_,{color:"info",icon:t(C)},{default:s(()=>[c(" Devi cambiare la password che ti Ã¨ stata assegnata ")]),_:1},8,["icon"]),l.value?(p(),m(_,{key:0,color:"danger",icon:n.mdiMonitorCellphone},{default:s(()=>[z,c(" Errore nell'effettuare il cambio della password ")]),_:1},8,["icon"])):$("",!0),a(d,{label:"Vecchia Password",help:"Inserisci la tua vecchia password"},{default:s(()=>[a(u,{modelValue:e.oldPass,"onUpdate:modelValue":o[0]||(o[0]=r=>e.oldPass=r),icon:t(i),type:"password",name:"old_password",autocomplete:"old-password"},null,8,["modelValue","icon"])]),_:1}),a(d,{label:"Nuova Password",help:"Inserisci la tua nuova password"},{default:s(()=>[a(u,{modelValue:e.pass,"onUpdate:modelValue":o[1]||(o[1]=r=>e.pass=r),icon:t(i),type:"password",name:"password",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),a(d,{label:"Ripeti Nuova Password",help:"Ripeti la tua nuova password"},{default:s(()=>[a(u,{modelValue:e.repeatPass,"onUpdate:modelValue":o[2]||(o[2]=r=>e.repeatPass=r),icon:t(i),type:"password",name:"password_confirmation",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:2},1032,["class","onSubmit"])]),_:1})]),_:1}))}};export{H as default};
