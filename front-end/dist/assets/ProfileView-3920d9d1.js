import{e as g,g as m,h as B,o as h,i as b,w as a,a as o,b as s,d as u,t as $,u as d,j as V,K as k,f as N,H as R,I as S,s as P}from"./index-c5522a6f.js";import{w as T,t as A,u as p}from"./mdi-9b0bf6d7.js";import{b as C,c as U}from"./SectionTitleLineWithButton-5c3c5b94.js";import{_ as y}from"./darkMode-cb7aa1d4.js";import{_ as f,a as w}from"./FormControl-bbcd3755.js";import{_ as z}from"./BaseButton-9889cf24.js";import{_ as E}from"./BaseButtons-5d5c878a.js";import{_ as I}from"./BaseLevel-addfce22.js";import{_ as j}from"./PillTag-e8643860.js";import{_ as M}from"./LayoutAuthenticated-66326c98.js";import{_ as q}from"./NotificationBar-23b56f09.js";const D={class:"space-y-3 text-center lg:mx-12"},F={class:"text-2xl"},H={class:"text-2l"},K=s("a",{class:"font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline",href:"https://t.me/sunsync_alert_bot"},"Bot Telegram",-1),L=s("br",null,null,-1),O={__name:"UserCard",setup(x){const r=g(),c=m(""),t=m(""),l=()=>{(r.getToken.value!=null||r.getToken.value!="")&&V.get("http://sunsync-backend.azurewebsites.net"+k,{headers:{Authorization:`Bearer ${r.getToken.value}`}}).then(e=>{c.value=e.data.username,t.value=e.data.bot_token})};return B(()=>{l()}),(e,v)=>(h(),b(y,null,{default:a(()=>[o(I,{type:"justify-around lg:justify-center"},{default:a(()=>[s("div",D,[s("h1",F,[u(" Buongiorno, "),s("strong",null,$(c.value),1),u("! ")]),s("h2",H,[u(" Il tuo token per accedere al "),K,u(" Ã¨:"),L,o(j,{class:"mt-2",label:t.value,color:"info",icon:d(T),small:!1},null,8,["label","icon"])])])]),_:1})]),_:1}))}},G={class:"grid grid-cols-1 gap-6"},J=s("b",null,"ERRORE: ",-1),re={__name:"ProfileView",setup(x){const r=g(),c=N(),t=m(!1),l=m(""),e=R({password:"",password_confirmation:""}),v=async()=>{e.password===e.password_confirmation?V.patch("http://sunsync-backend.azurewebsites.net"+k,{old_password:e.old_password,password:e.password},{headers:{Authorization:`Bearer ${r.getToken.value}`}}).then(()=>{c.push("/dashboard")}).catch(_=>{t.value=!0,l.value=_.response.data["400 Bad Request"]}):(t.value=!0,l.value="Le password non coincidono")};return(_,n)=>(h(),b(M,null,{default:a(()=>[o(U,null,{default:a(()=>[o(C,{icon:d(A),title:"Profilo",main:""},null,8,["icon"]),o(O,{class:"mb-6"}),s("div",G,[o(y,{"is-form":"",onSubmit:S(v,["prevent"])},{footer:a(()=>[o(E,null,{default:a(()=>[o(z,{type:"submit",color:"info",label:"Cambia Password"})]),_:1})]),default:a(()=>[t.value?(h(),b(q,{key:0,color:"danger",icon:_.mdiMonitorCellphone},{default:a(()=>[J,u(" "+$(l.value),1)]),_:1},8,["icon"])):P("",!0),o(f,{label:"Vecchia Password",help:"Inserisci la tua vecchia password"},{default:a(()=>[o(w,{modelValue:e.old_password,"onUpdate:modelValue":n[0]||(n[0]=i=>e.old_password=i),icon:d(p),type:"password",name:"old_password",autocomplete:"old-password"},null,8,["modelValue","icon"])]),_:1}),o(f,{label:"Nuova Password",help:"Inserisci la tua nuova password"},{default:a(()=>[o(w,{modelValue:e.password,"onUpdate:modelValue":n[1]||(n[1]=i=>e.password=i),icon:d(p),type:"password",name:"password",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1}),o(f,{label:"Ripeti Nuova Password",help:"Ripeti la tua nuova password"},{default:a(()=>[o(w,{modelValue:e.password_confirmation,"onUpdate:modelValue":n[2]||(n[2]=i=>e.password_confirmation=i),icon:d(p),type:"password",name:"password_confirmation",autocomplete:"new-password"},null,8,["modelValue","icon"])]),_:1})]),_:1},8,["onSubmit"])])]),_:1})]),_:1}))}};export{re as default};
